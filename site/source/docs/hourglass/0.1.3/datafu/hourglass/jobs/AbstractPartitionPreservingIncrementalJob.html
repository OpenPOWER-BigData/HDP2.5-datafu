<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_27) on Thu Dec 12 19:12:09 PST 2013 -->
<TITLE>
AbstractPartitionPreservingIncrementalJob (DataFu Hourglass)
</TITLE>

<META NAME="date" CONTENT="2013-12-12">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AbstractPartitionPreservingIncrementalJob (DataFu Hourglass)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/AbstractPartitionPreservingIncrementalJob.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../datafu/hourglass/jobs/AbstractPartitionCollapsingIncrementalJob.Report.html" title="class in datafu.hourglass.jobs"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.Report.html" title="class in datafu.hourglass.jobs"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AbstractPartitionPreservingIncrementalJob.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
datafu.hourglass.jobs</FONT>
<BR>
Class AbstractPartitionPreservingIncrementalJob</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by ">org.apache.hadoop.conf.Configured
      <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><A HREF="../../../datafu/hourglass/jobs/AbstractJob.html" title="class in datafu.hourglass.jobs">datafu.hourglass.jobs.AbstractJob</A>
          <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><A HREF="../../../datafu/hourglass/jobs/TimeBasedJob.html" title="class in datafu.hourglass.jobs">datafu.hourglass.jobs.TimeBasedJob</A>
              <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><A HREF="../../../datafu/hourglass/jobs/IncrementalJob.html" title="class in datafu.hourglass.jobs">datafu.hourglass.jobs.IncrementalJob</A>
                  <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><B>datafu.hourglass.jobs.AbstractPartitionPreservingIncrementalJob</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD>org.apache.hadoop.conf.Configurable</DD>
</DL>
<DL>
<DT><B>Direct Known Subclasses:</B> <DD><A HREF="../../../datafu/hourglass/jobs/PartitionPreservingIncrementalJob.html" title="class in datafu.hourglass.jobs">PartitionPreservingIncrementalJob</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public abstract class <B>AbstractPartitionPreservingIncrementalJob</B><DT>extends <A HREF="../../../datafu/hourglass/jobs/IncrementalJob.html" title="class in datafu.hourglass.jobs">IncrementalJob</A></DL>
</PRE>

<P>
An <A HREF="../../../datafu/hourglass/jobs/IncrementalJob.html" title="class in datafu.hourglass.jobs"><CODE>IncrementalJob</CODE></A> that consumes partitioned input data and produces
 output data having the same partitions.
 Typically this is used in conjunction with <A HREF="../../../datafu/hourglass/jobs/AbstractPartitionCollapsingIncrementalJob.html" title="class in datafu.hourglass.jobs"><CODE>AbstractPartitionCollapsingIncrementalJob</CODE></A>
 when computing aggregates over sliding windows.  A partition-preserving job can perform
 initial aggregation per-day, which can then be consumed by a partition-collapsing job to
 produce the final aggregates over the time window. 
 Only Avro is supported for the input, intermediate, and output data.
 
 <p>
 Implementations of this class must provide key, intermediate value, and output value schemas.
 The key and intermediate value schemas define the output for the mapper and combiner.
 The key and output value schemas define the output for the reducer.
 These are defined by overriding <A HREF="../../../datafu/hourglass/jobs/IncrementalJob.html#getKeySchema()"><CODE>IncrementalJob.getKeySchema()</CODE></A>, <A HREF="../../../datafu/hourglass/jobs/IncrementalJob.html#getIntermediateValueSchema()"><CODE>IncrementalJob.getIntermediateValueSchema()</CODE></A>,
 and <A HREF="../../../datafu/hourglass/jobs/IncrementalJob.html#getOutputValueSchema()"><CODE>IncrementalJob.getOutputValueSchema()</CODE></A>.
 </p>
 
 <p>
 Implementations must also provide a mapper by overriding <A HREF="../../../datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.html#getMapper()"><CODE>getMapper()</CODE></A> and an accumulator
 for the reducer by overriding <A HREF="../../../datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.html#getReducerAccumulator()"><CODE>getReducerAccumulator()</CODE></A>.  An optional combiner may be
 provided by overriding <A HREF="../../../datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.html#getCombinerAccumulator()"><CODE>getCombinerAccumulator()</CODE></A>.  For the combiner to be used
 the property <em>use.combiner</em> must also be set to true.
 </p>
 
 <p>
 The distinguishing feature this type of job is that the input partitioning is preserved in the ouput.
 The data from each partition is processed independently of other partitions and then output separately.
 For example, input that is partitioned by day can be aggregated by day and then output by day.
 This is achieved by attaching a long value to each key, which represents the partition, so that the reducer
 receives data grouped by the key and partition together.  Multiple outputs are then used so that the output
 will have the same partitions as the input.
 </p>
 
 <p>
 The input path can be provided either through the property <em>input.path</em>
 or by calling <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#setInputPaths(java.util.List)"><CODE>AbstractJob.setInputPaths(List)</CODE></A>.  If multiple input paths are provided then
 this implicitly means a join is to be performed.  Multiple input paths can be provided via
 properties by prefixing each with <em>input.path.</em>, such as <em>input.path.first</em>
 and <em>input.path.second</em>.
 Input data must be partitioned by day according to the naming convention yyyy/MM/dd.
 The output path can be provided either through the property <em>output.path</em> 
 or by calling <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#setOutputPath(org.apache.hadoop.fs.Path)"><CODE>AbstractJob.setOutputPath(Path)</CODE></A>.
 Output data will be written using the same naming convention as the input, namely yyyy/MM/dd, where the date used
 to format the output path is the same the date for the input it was derived from.
 For example, if the desired time range to process is 2013/01/01 through 2013/01/14,
 then the output will be named 2013/01/01 through 2013/01/14. 
 By default the job will fail if any input data in the desired time window is missing.  This can be overriden by setting
 <em>fail.on.missing</em> to false.
 </p>
 
 <p>
 The job will not process input for which a corresponding output already exists.  For example, if the desired date
 range is 2013/01/01 through 2013/01/14 and the outputs 2013/01/01 through 2013/01/12 exist, then only
 2013/01/13 and 2013/01/14 will be processed and only 2013/01/13 and 2013/01/14 will be produced.  
 </p>
 
 <p>
 The number of paths in the output to retain can be configured through the property <em>retention.count</em>, 
 or by calling <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#setRetentionCount(java.lang.Integer)"><CODE>AbstractJob.setRetentionCount(Integer)</CODE></A>.  When this property is set only the latest paths in the output
 will be kept; the remainder will be removed.  By default there is no retention count set so all output paths are kept.
 </p>
 
 <p>
 The inputs to process can be controlled by defining a desired date range.  By default the job will process all input
 data available.  To limit the number of days of input to process one can set the property <em>num.days</em>
 or call <A HREF="../../../datafu/hourglass/jobs/TimeBasedJob.html#setNumDays(java.lang.Integer)"><CODE>TimeBasedJob.setNumDays(Integer)</CODE></A>.  This would define a processing window with the same number of days,
 where the end date of the window is the latest available input and the start date is <em>num.days</em> ago.  
 Only inputs within this window would be processed.
 Because the end date is the same as the latest available input, as new input data becomes available the end of the
 window will advance forward to include it.  The end date can be adjusted backwards relative to the latest input
 through the property <em>days.ago</em>, or by calling <A HREF="../../../datafu/hourglass/jobs/TimeBasedJob.html#setDaysAgo(java.lang.Integer)"><CODE>TimeBasedJob.setDaysAgo(Integer)</CODE></A>.  This subtracts as many days
 from the latest available input date to determine the end date.  The start date or end date can also be fixed
 by setting the properties <em>start.date</em> or <em>end.date</em>, or by calling <A HREF="../../../datafu/hourglass/jobs/TimeBasedJob.html#setStartDate(java.util.Date)"><CODE>TimeBasedJob.setStartDate(Date)</CODE></A>
 or <A HREF="../../../datafu/hourglass/jobs/TimeBasedJob.html#setEndDate(java.util.Date)"><CODE>TimeBasedJob.setEndDate(Date)</CODE></A>. 
 </p>
 
 <p>
 The number of reducers to use is automatically determined based on the size of the data to process.  
 The total size is computed and then divided by the value of the property <em>num.reducers.bytes.per.reducer</em>, which
 defaults to 256 MB.  This is the number of reducers that will be used.  
 The number of reducers can also be set to a fixed value through the property <em>num.reducers</em>.
 </p>
 
 <p>
 This type of job is capable of performing its work over multiple iterations.  
 The number of days to process at a time can be limited by setting the property <em>max.days.to.process</em>,
 or by calling <A HREF="../../../datafu/hourglass/jobs/IncrementalJob.html#setMaxToProcess(java.lang.Integer)"><CODE>IncrementalJob.setMaxToProcess(Integer)</CODE></A>.  The default is 90 days.  
 This can be useful when there are restrictions on how many tasks 
 can be used by a single MapReduce job in the cluster.  When this property is set, the job will process no more than
 this many days at a time, and it will perform one or more iterations if necessary to complete the work.
 The number of iterations can be limited by setting the property <em>max.iterations</em>, or by calling <A HREF="../../../datafu/hourglass/jobs/IncrementalJob.html#setMaxIterations(java.lang.Integer)"><CODE>IncrementalJob.setMaxIterations(Integer)</CODE></A>.
 If the number of iterations is exceeded the job will fail.  By default the maximum number of iterations is 20.
 </p>
 
 <p>
 Hadoop configuration may be provided by setting a property with the prefix <em>hadoop-conf.</em>.
 For example, <em>mapred.min.split.size</em> can be configured by setting property
 <em>hadoop-conf.mapred.min.split.size</em> to the desired value. 
 </p>
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>"Matthew Hayes"</DD>
</DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.Report.html" title="class in datafu.hourglass.jobs">AbstractPartitionPreservingIncrementalJob.Report</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reports files created and processed for an iteration of the job.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.html#AbstractPartitionPreservingIncrementalJob()">AbstractPartitionPreservingIncrementalJob</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Initializes the job.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.html#AbstractPartitionPreservingIncrementalJob(java.lang.String, java.util.Properties)">AbstractPartitionPreservingIncrementalJob</A></B>(java.lang.String&nbsp;name,
                                          java.util.Properties&nbsp;props)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Initializes the job with a job name and properties.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../datafu/hourglass/mapreduce/ObjectReducer.html" title="class in datafu.hourglass.mapreduce">ObjectReducer</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.html#getCombineProcessor()">getCombineProcessor</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../datafu/hourglass/model/Accumulator.html" title="interface in datafu.hourglass.model">Accumulator</A>&lt;org.apache.avro.generic.GenericRecord,org.apache.avro.generic.GenericRecord&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.html#getCombinerAccumulator()">getCombinerAccumulator</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets the accumulator used for the combiner.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>abstract &nbsp;<A HREF="../../../datafu/hourglass/model/Mapper.html" title="interface in datafu.hourglass.model">Mapper</A>&lt;org.apache.avro.generic.GenericRecord,org.apache.avro.generic.GenericRecord,org.apache.avro.generic.GenericRecord&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.html#getMapper()">getMapper</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets the mapper.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../datafu/hourglass/mapreduce/ObjectMapper.html" title="class in datafu.hourglass.mapreduce">ObjectMapper</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.html#getMapProcessor()">getMapProcessor</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.html#getOutputSchemaName()">getOutputSchemaName</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the name for the reduce output schema.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.html#getOutputSchemaNamespace()">getOutputSchemaNamespace</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the namespace for the reduce output schema.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../datafu/hourglass/mapreduce/ObjectReducer.html" title="class in datafu.hourglass.mapreduce">ObjectReducer</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.html#getReduceProcessor()">getReduceProcessor</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>abstract &nbsp;<A HREF="../../../datafu/hourglass/model/Accumulator.html" title="interface in datafu.hourglass.model">Accumulator</A>&lt;org.apache.avro.generic.GenericRecord,org.apache.avro.generic.GenericRecord&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.html#getReducerAccumulator()">getReducerAccumulator</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets the accumulator used for the reducer.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;<A HREF="../../../datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.Report.html" title="class in datafu.hourglass.jobs">AbstractPartitionPreservingIncrementalJob.Report</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.html#getReports()">getReports</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get reports that summarize each of the job iterations.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.html#initialize()">initialize</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Initialization required before running job.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.html#run()">run</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run the job.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_datafu.hourglass.jobs.IncrementalJob"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class datafu.hourglass.jobs.<A HREF="../../../datafu/hourglass/jobs/IncrementalJob.html" title="class in datafu.hourglass.jobs">IncrementalJob</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../datafu/hourglass/jobs/IncrementalJob.html#getIntermediateValueSchema()">getIntermediateValueSchema</A>, <A HREF="../../../datafu/hourglass/jobs/IncrementalJob.html#getKeySchema()">getKeySchema</A>, <A HREF="../../../datafu/hourglass/jobs/IncrementalJob.html#getMaxIterations()">getMaxIterations</A>, <A HREF="../../../datafu/hourglass/jobs/IncrementalJob.html#getMaxToProcess()">getMaxToProcess</A>, <A HREF="../../../datafu/hourglass/jobs/IncrementalJob.html#getOutputValueSchema()">getOutputValueSchema</A>, <A HREF="../../../datafu/hourglass/jobs/IncrementalJob.html#getSchemas()">getSchemas</A>, <A HREF="../../../datafu/hourglass/jobs/IncrementalJob.html#isFailOnMissing()">isFailOnMissing</A>, <A HREF="../../../datafu/hourglass/jobs/IncrementalJob.html#setFailOnMissing(boolean)">setFailOnMissing</A>, <A HREF="../../../datafu/hourglass/jobs/IncrementalJob.html#setMaxIterations(java.lang.Integer)">setMaxIterations</A>, <A HREF="../../../datafu/hourglass/jobs/IncrementalJob.html#setMaxToProcess(java.lang.Integer)">setMaxToProcess</A>, <A HREF="../../../datafu/hourglass/jobs/IncrementalJob.html#setProperties(java.util.Properties)">setProperties</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_datafu.hourglass.jobs.TimeBasedJob"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class datafu.hourglass.jobs.<A HREF="../../../datafu/hourglass/jobs/TimeBasedJob.html" title="class in datafu.hourglass.jobs">TimeBasedJob</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../datafu/hourglass/jobs/TimeBasedJob.html#getDaysAgo()">getDaysAgo</A>, <A HREF="../../../datafu/hourglass/jobs/TimeBasedJob.html#getEndDate()">getEndDate</A>, <A HREF="../../../datafu/hourglass/jobs/TimeBasedJob.html#getNumDays()">getNumDays</A>, <A HREF="../../../datafu/hourglass/jobs/TimeBasedJob.html#getStartDate()">getStartDate</A>, <A HREF="../../../datafu/hourglass/jobs/TimeBasedJob.html#setDaysAgo(java.lang.Integer)">setDaysAgo</A>, <A HREF="../../../datafu/hourglass/jobs/TimeBasedJob.html#setEndDate(java.util.Date)">setEndDate</A>, <A HREF="../../../datafu/hourglass/jobs/TimeBasedJob.html#setNumDays(java.lang.Integer)">setNumDays</A>, <A HREF="../../../datafu/hourglass/jobs/TimeBasedJob.html#setStartDate(java.util.Date)">setStartDate</A>, <A HREF="../../../datafu/hourglass/jobs/TimeBasedJob.html#validate()">validate</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_datafu.hourglass.jobs.AbstractJob"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class datafu.hourglass.jobs.<A HREF="../../../datafu/hourglass/jobs/AbstractJob.html" title="class in datafu.hourglass.jobs">AbstractJob</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#config(org.apache.hadoop.conf.Configuration)">config</A>, <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#createRandomTempPath()">createRandomTempPath</A>, <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#ensurePath(org.apache.hadoop.fs.Path)">ensurePath</A>, <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#getCountersParentPath()">getCountersParentPath</A>, <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#getFileSystem()">getFileSystem</A>, <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#getInputPaths()">getInputPaths</A>, <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#getName()">getName</A>, <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#getNumReducers()">getNumReducers</A>, <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#getOutputPath()">getOutputPath</A>, <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#getProperties()">getProperties</A>, <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#getRetentionCount()">getRetentionCount</A>, <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#getTempPath()">getTempPath</A>, <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#isUseCombiner()">isUseCombiner</A>, <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#randomTempPath()">randomTempPath</A>, <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#setCountersParentPath(org.apache.hadoop.fs.Path)">setCountersParentPath</A>, <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#setInputPaths(java.util.List)">setInputPaths</A>, <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#setName(java.lang.String)">setName</A>, <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#setNumReducers(java.lang.Integer)">setNumReducers</A>, <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#setOutputPath(org.apache.hadoop.fs.Path)">setOutputPath</A>, <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#setRetentionCount(java.lang.Integer)">setRetentionCount</A>, <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#setTempPath(org.apache.hadoop.fs.Path)">setTempPath</A>, <A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#setUseCombiner(boolean)">setUseCombiner</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.apache.hadoop.conf.Configured"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class org.apache.hadoop.conf.Configured</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>getConf, setConf</CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="AbstractPartitionPreservingIncrementalJob()"><!-- --></A><H3>
AbstractPartitionPreservingIncrementalJob</H3>
<PRE>
public <B>AbstractPartitionPreservingIncrementalJob</B>()
                                          throws java.io.IOException</PRE>
<DL>
<DD>Initializes the job.
<P>
<DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DL>
<HR>

<A NAME="AbstractPartitionPreservingIncrementalJob(java.lang.String, java.util.Properties)"><!-- --></A><H3>
AbstractPartitionPreservingIncrementalJob</H3>
<PRE>
public <B>AbstractPartitionPreservingIncrementalJob</B>(java.lang.String&nbsp;name,
                                                 java.util.Properties&nbsp;props)
                                          throws java.io.IOException</PRE>
<DL>
<DD>Initializes the job with a job name and properties.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>name</CODE> - job name<DD><CODE>props</CODE> - configuration properties
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getMapper()"><!-- --></A><H3>
getMapper</H3>
<PRE>
public abstract <A HREF="../../../datafu/hourglass/model/Mapper.html" title="interface in datafu.hourglass.model">Mapper</A>&lt;org.apache.avro.generic.GenericRecord,org.apache.avro.generic.GenericRecord,org.apache.avro.generic.GenericRecord&gt; <B>getMapper</B>()</PRE>
<DL>
<DD>Gets the mapper.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>mapper</DL>
</DD>
</DL>
<HR>

<A NAME="getCombinerAccumulator()"><!-- --></A><H3>
getCombinerAccumulator</H3>
<PRE>
public <A HREF="../../../datafu/hourglass/model/Accumulator.html" title="interface in datafu.hourglass.model">Accumulator</A>&lt;org.apache.avro.generic.GenericRecord,org.apache.avro.generic.GenericRecord&gt; <B>getCombinerAccumulator</B>()</PRE>
<DL>
<DD>Gets the accumulator used for the combiner.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>combiner accumulator</DL>
</DD>
</DL>
<HR>

<A NAME="getReducerAccumulator()"><!-- --></A><H3>
getReducerAccumulator</H3>
<PRE>
public abstract <A HREF="../../../datafu/hourglass/model/Accumulator.html" title="interface in datafu.hourglass.model">Accumulator</A>&lt;org.apache.avro.generic.GenericRecord,org.apache.avro.generic.GenericRecord&gt; <B>getReducerAccumulator</B>()</PRE>
<DL>
<DD>Gets the accumulator used for the reducer.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>reducer accumulator</DL>
</DD>
</DL>
<HR>

<A NAME="run()"><!-- --></A><H3>
run</H3>
<PRE>
public void <B>run</B>()
         throws java.io.IOException,
                java.lang.InterruptedException,
                java.lang.ClassNotFoundException</PRE>
<DL>
<DD>Run the job.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#run()">run</A></CODE> in class <CODE><A HREF="../../../datafu/hourglass/jobs/AbstractJob.html" title="class in datafu.hourglass.jobs">AbstractJob</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE>
<DD><CODE>java.lang.InterruptedException</CODE>
<DD><CODE>java.lang.ClassNotFoundException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getReports()"><!-- --></A><H3>
getReports</H3>
<PRE>
public java.util.List&lt;<A HREF="../../../datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.Report.html" title="class in datafu.hourglass.jobs">AbstractPartitionPreservingIncrementalJob.Report</A>&gt; <B>getReports</B>()</PRE>
<DL>
<DD>Get reports that summarize each of the job iterations.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>reports</DL>
</DD>
</DL>
<HR>

<A NAME="initialize()"><!-- --></A><H3>
initialize</H3>
<PRE>
protected void <B>initialize</B>()</PRE>
<DL>
<DD><B>Description copied from class: <CODE><A HREF="../../../datafu/hourglass/jobs/AbstractJob.html#initialize()">AbstractJob</A></CODE></B></DD>
<DD>Initialization required before running job.
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE><A HREF="../../../datafu/hourglass/jobs/IncrementalJob.html#initialize()">initialize</A></CODE> in class <CODE><A HREF="../../../datafu/hourglass/jobs/IncrementalJob.html" title="class in datafu.hourglass.jobs">IncrementalJob</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getOutputSchemaName()"><!-- --></A><H3>
getOutputSchemaName</H3>
<PRE>
protected java.lang.String <B>getOutputSchemaName</B>()</PRE>
<DL>
<DD>Get the name for the reduce output schema. 
 By default this is the name of the class with "Output" appended.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>output schema name</DL>
</DD>
</DL>
<HR>

<A NAME="getOutputSchemaNamespace()"><!-- --></A><H3>
getOutputSchemaNamespace</H3>
<PRE>
protected java.lang.String <B>getOutputSchemaNamespace</B>()</PRE>
<DL>
<DD>Get the namespace for the reduce output schema.
 By default this is the package of the class.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>output schema namespace</DL>
</DD>
</DL>
<HR>

<A NAME="getMapProcessor()"><!-- --></A><H3>
getMapProcessor</H3>
<PRE>
protected <A HREF="../../../datafu/hourglass/mapreduce/ObjectMapper.html" title="class in datafu.hourglass.mapreduce">ObjectMapper</A> <B>getMapProcessor</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getCombineProcessor()"><!-- --></A><H3>
getCombineProcessor</H3>
<PRE>
protected <A HREF="../../../datafu/hourglass/mapreduce/ObjectReducer.html" title="class in datafu.hourglass.mapreduce">ObjectReducer</A> <B>getCombineProcessor</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getReduceProcessor()"><!-- --></A><H3>
getReduceProcessor</H3>
<PRE>
protected <A HREF="../../../datafu/hourglass/mapreduce/ObjectReducer.html" title="class in datafu.hourglass.mapreduce">ObjectReducer</A> <B>getReduceProcessor</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/AbstractPartitionPreservingIncrementalJob.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../datafu/hourglass/jobs/AbstractPartitionCollapsingIncrementalJob.Report.html" title="class in datafu.hourglass.jobs"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.Report.html" title="class in datafu.hourglass.jobs"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?datafu/hourglass/jobs/AbstractPartitionPreservingIncrementalJob.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AbstractPartitionPreservingIncrementalJob.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Matthew Hayes
</BODY>
</HTML>
